/*C12*/SET SCHEMA PUBLIC
drop table if exists t_ue CASCADE 
drop table if exists tbloc CASCADE 
drop table if exists tbloc_options CASCADE 
drop table if exists tbloc_ues CASCADE 
drop table if exists tformation CASCADE 
drop table if exists toption CASCADE 
drop table if exists toption_ues CASCADE 
drop table if exists tuser CASCADE 
drop table if exists tuser_visited_formations CASCADE 
drop sequence hibernate_sequence if exists
create sequence hibernate_sequence start with 1 increment by 1
create table t_ue (id integer not null, ue_code varchar(200) not null, ue_cout double, ue_credits integer, ue_intitule varchar(200) not null, ue_nombre_groupescm integer, ue_nombre_groupestd integer, ue_nombre_groupestp integer, ue_nombre_heurecm double, ue_nombre_heuretd double, ue_nombre_heuretp double, f_id integer, primary key (id))
create table tbloc (b_id integer not null, b_code varchar(200) not null, b_cout double, eff_site1 integer, eff_site2 integer, eff_site3 integer, eff_site4 integer, b_intitule varchar(200) not null, f_id integer, primary key (b_id))
create table tbloc_options (blocs_b_id integer not null, options_o_id integer not null)
create table tbloc_ues (blocs_b_id integer not null, ues_id integer not null)
create table tformation (f_id integer not null, f_code varchar(200) not null, f_cout double, f_intitul\u00e9 varchar(200) not null, f_cm integer, f_td integer, f_tp integer, u_id integer, primary key (f_id))
create table toption (o_id integer not null, o_code varchar(200) not null, o_cout double, o_credits integer, o_intitule varchar(200) not null, f_id integer, primary key (o_id))
create table toption_ues (options_o_id integer not null, ues_id integer not null)
create table tuser (u_id integer not null, u_email varchar(200) not null, u_mot_de_passe varchar(200) not null, primary key (u_id))
create table tuser_visited_formations (visitors_u_id integer not null, visited_formations_f_id integer not null)
alter table t_ue add constraint FKhwtceo9flfpsglv6auu0khpen foreign key (f_id) references tformation
alter table tbloc add constraint FKdahdm0w5y5cm9sm1h0ed5axpq foreign key (f_id) references tformation
alter table tbloc_options add constraint FKt2ou0jmed5h1wn500sl954a0w foreign key (options_o_id) references toption
alter table tbloc_options add constraint FK9y1sn3qu7u2t2j7lapy6qpbsy foreign key (blocs_b_id) references tbloc
alter table tbloc_ues add constraint FK3vb5yrhsymkakeuwjogvyi9oh foreign key (ues_id) references t_ue
alter table tbloc_ues add constraint FKoa5ppj1b2d013c4ti8o6g2v4r foreign key (blocs_b_id) references tbloc
alter table tformation add constraint FKicyuyavk3qympwe71hm3swthx foreign key (u_id) references tuser
alter table toption add constraint FKsphwq6j53vi6qtliusxjobk1i foreign key (f_id) references tformation
alter table toption_ues add constraint FKfk1lnjsureywfm79q1mmms6w0 foreign key (ues_id) references t_ue
alter table toption_ues add constraint FKg7rc83e6gqs1n60wa9b00s7ql foreign key (options_o_id) references toption
alter table tuser_visited_formations add constraint FK3dortjkx6g01pxvamtkr6xmxm foreign key (visited_formations_f_id) references tformation
alter table tuser_visited_formations add constraint FKcswksxu5fh1bb8p7rm7k3waom foreign key (visitors_u_id) references tuser
INSERT INTO TUSER VALUES(1,'user.test@gmail.com','userMdp')
ALTER SEQUENCE PUBLIC.HIBERNATE_SEQUENCE RESTART WITH 2
COMMIT
INSERT INTO TUSER VALUES(2,'user2.test@gmail.com','userMdp2')
ALTER SEQUENCE PUBLIC.HIBERNATE_SEQUENCE RESTART WITH 3
COMMIT
INSERT INTO TUSER VALUES(3,'user3.test@gmail.com','userMdp2')
ALTER SEQUENCE PUBLIC.HIBERNATE_SEQUENCE RESTART WITH 4
COMMIT
INSERT INTO TFORMATION VALUES(4,'DIM',0.0E0,'Diplome infirmerie marseille',100,15,15,1)
ALTER SEQUENCE PUBLIC.HIBERNATE_SEQUENCE RESTART WITH 5
COMMIT
INSERT INTO TFORMATION VALUES(5,'DIM',0.0E0,'Diplome infirmerie marseille',100,15,15,1)
ALTER SEQUENCE PUBLIC.HIBERNATE_SEQUENCE RESTART WITH 6
COMMIT
INSERT INTO TUSER_VISITED_FORMATIONS VALUES(3,4)
COMMIT
DELETE FROM TUSER_VISITED_FORMATIONS WHERE VISITORS_U_ID=3 AND VISITED_FORMATIONS_F_ID=4
INSERT INTO TUSER_VISITED_FORMATIONS VALUES(3,4)
INSERT INTO TUSER_VISITED_FORMATIONS VALUES(3,5)
COMMIT
INSERT INTO TFORMATION VALUES(6,'DIM',0.0E0,'Diplome infirmerie marseille',100,15,15,3)
ALTER SEQUENCE PUBLIC.HIBERNATE_SEQUENCE RESTART WITH 7
COMMIT
INSERT INTO TUSER_VISITED_FORMATIONS VALUES(1,6)
COMMIT
DELETE FROM TUSER_VISITED_FORMATIONS WHERE VISITORS_U_ID=1 AND VISITED_FORMATIONS_F_ID=6
COMMIT
